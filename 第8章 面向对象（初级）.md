---
title: 第8章 面向对象（初级）
date: 2023-10-10 15:01:00
tags: 韩顺平Java学习
---

# 第8章 面向对象（初级）

## 对象内存布局

<img src="http://yyh-blogimage.oss-cn-shanghai.aliyuncs.com/img/image-20220124195406956.png" alt="image-20220124195406956" style="zoom:30%;" />

## 属性

属性=成员变量

### 对象的引用和对象名：

对象引用在栈里，对象在堆里

## 类和对象的内存分配机制

```java
Person p2 = new Person();
Person p1 = p2//把p1赋给p2，或者说让p2指向p1
```

先在堆中创建一个Person对象，再在方法区创建对象的常量和加载信息，并将其地址返回给堆，基本数据类型则直接存放于堆中，而后将堆中的对象地址返回给栈中的p2,p2指向该地址。p1在栈中指向p2复制得到的地址。

Java内存结构分析

1. 栈：一般存放基本数据类型（局部变量）；
2. 堆：存放对象（Person person，数组等）；
3. 方法区：常量池（常量，比如字符串），类加载信息

Java创建对象的流程简单分析

1. 先加载Person类信息（属性和方法信息，只加载一次）；
2. 在堆中分配空间，进行默认初始化；
3. 将地址赋给p，p指向对象；
4. 进行指定初始化，比如：`p.name = "jack";`

## 成员方法（方法）

方法调用机制

<img src="http://yyh-blogimage.oss-cn-shanghai.aliyuncs.com/img/image-20220126195934038.png" alt="image-20220126195934038" style="zoom: 33%;" />

## 重载

## 递归

1. 执行一个方法时，就创建一个新的受保护的独立空间（栈空间）
2. 方法的局部变量时独立的，不会相互影响，比如n变量
3. 如果方法中使用的是引用类型变量（比如数组、对象），就会共享该引用类型的数据
4. 递归必须向退出递归的条件逼近，否则就是无限递归，出现StackOverflowError，就会死龟
5. 当一个方法执行完毕，或者遇到return，就会返回，遵守谁调用，就结果返回给谁，同时当方法执行完毕或者返回时，该方法就执行完毕

## 可变参数

### 注意事项和使用细节

1. 可变参数的实参可以为0个或者任意多个
2. 可变参数的实参可以为数组
3. 可变参数的本质就是数组
4. 可变参数可以和普通参数类型的参数一起放在形参列表，但必须保证可变参数在最后
5. 一个形参列表中只能出现一个可变参数

```java
public int sum(String str,int... a)
```

## 作用域

全局变量和局部变量

<img src="http://yyh-blogimage.oss-cn-shanghai.aliyuncs.com/img/image-20220128105339594.png" alt="image-20220128105339594" style="zoom:40%;" />

全局变量可以用修饰符，局部变量不可以

## 构造器（构造方法）

一旦定义了自己的构造器，那么无参构造器（默认构造器）就被覆盖，就不能再使用无参构造器，除非自己重新定义一个无参构造器

构造器并不创建对象，而是对对象进行初始化

## this关键字

this指当前对象自己

简单地说，哪个对象调用，this就代表了哪个对象

### this的注意事项和使用细节

1. this关键字可以用来访问本类的属性、方法、构造器
2. this用于区分当前类的属性和局部变量
3. 访问成员方法的语法：`this.方法名(参数列表)`
4. 访问构造器的语法：`this(参数列表)`。**注意只能在构造器中使用**（即只能在构造器中访问另外一个构造器，必须放在第一条语句）
5. this不能在类定义的外部使用，只能在类定义的方法中使用

```java
//构造器语法:this(参数列表)；必须放置于第一条语句
public T(){
    this("jack",100);//只能在构造器中使用这种语法，其他成员方法不得使用
    System.out.println()
}
public T(String name,int age){
    ......
}
```

`this.name`访问的一定是类的属性，而`name`则有可能访问的是成员方法的局部变量

## 对象数组

1. 静态初始化

   在定义数组的同时对数组元素进行初始化

   ```java
   BankAccount[] accounts = { new BankAccount(“Zhang", 100.00),
   
   new BankAccount(“Li", 2380.00),}
   ```

2. 动态初始化

   - 使用运算符new为数组分配空间 

     ```java
     type[ ] arrayName=new type[arraySize];
     ```

   - 只是对象数组本身分配空间，并**没有对数组元素进行初始化**，即**数组元素均为空**，因此下列程序会报错

     ```java
     Person[] people = new Person[100];
             people[0].name="yyh";
     ```